---
title: "おわりに"
---

# おわりに

ここでは、トポロジーのプリミティブの種別にノード、エッジ、フェイスがあることを示し、実際にプリミティブの作成編集を行いました。
また、トポジオメトリーについて説明し、追加編集を行いました。
さらにトポジオメトリーはレイヤーとも呼ばれ、階層構造を持つことを示し、子レイヤーの生成を行いました。
そして、国土数値情報（行政区域）の市区町村ポリゴンから市区町村レイヤーと都道府県レイヤーを作成しました。

まず、トポロジープリミティブの直接の操作は、できるだけ避けましょう。おそらくトポジオメトリーで済むはずです。

区画がきっちりつまっている場合にトポロジーを使うときっちりした位置関係を保存したまま扱えます。また、階層構造にできるので、市区町村と都道府県みたいに、きっちりした親子構造があるなら、トポロジーを使う利点はあると考えます。

逆に言うと、いい加減に管理してもいいのでしたら、トポロジーの処理は時間がかかるのでお勧めしません。

ソフトウェアは必要に応じて使うのが大前提です。必要なら使い、不要なら使わないだけです。でも知っておくこと自体は重要です。解決にトポロジーを使うべき問題に直面した時、知っていたら使えますが、知らなければ選択肢にも上がることもありませんから。

# 余談: オーバーラップ/隙間のない簡略化はトポロジーを使いません

以前は、簡略化してもオーバーラップ/隙間が発生しないことをトポロジーの利点として述べていましたが、現在では、ポリゴンカバレッジ関数を使います。

トポジオメトリーを使った場合には、簡略化に合計で40-50分かかっていました。主にトポロジーの構築に時間を食っています。

ところが、ST_CoverageSimplify() を使うと 23秒 で簡略化できました。しかも、postgisエクステンション単独で使えるので、postgis_topologyエクステンションを導入する必要がありません。

参考: https://zenn.dev/boiledorange73/articles/0070-coveragesimplify , https://postgis.net/docs/ja/ST_CoverageSimplify.html
